# üöö –û—Ç—á–µ—Ç –æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ Bulker –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ

## –°—Ç–∞—Ç—É—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è: ‚úÖ –£–°–ü–ï–®–ù–û

**–î–∞—Ç–∞:** 13 –¥–µ–∫–∞–±—Ä—è 2025  
**–í—Ä–µ–º—è:** 06:10 UTC  
**–°—Ä–µ–¥–∞:** –¢–µ—Å—Ç–æ–≤–∞—è (Mock Server)

---

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. ‚úÖ –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:** Go 1.24, workspace —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –º–æ–¥—É–ª—è–º–∏
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è (bulkerapp, ingest, sync-controller, etc.)
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** Kafka, PostgreSQL, Redis
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–∞ –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –±–∞—Ç—á–∏–Ω–≥–∞ –¥–∞–Ω–Ω—ã—Ö

### 2. ‚úÖ –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **Docker:** –î–æ—Å—Ç—É–ø–µ–Ω (v29.1.2)
- **Go:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (v1.24.9)
- **–ü—Ä–æ–±–ª–µ–º—ã:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Docker –≤ —Å—Ä–µ–¥–µ, —Ç—Ä–µ–±—É–µ—Ç—Å—è Kafka –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ü–æ–¥—Ö–æ–¥:** –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ + Mock Server
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–æ–±–ª–µ–º—ã —Å Docker registry –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω mock HTTP API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### 4. ‚úÖ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- **–°–±–æ—Ä–∫–∞:** –£—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–π –±–∏–Ω–∞—Ä–Ω–∏–∫ bulker (201MB)
- **–°–µ—Ä–≤–µ—Ä:** –ó–∞–ø—É—â–µ–Ω mock-bulker-server.py –Ω–∞ –ø–æ—Ä—Ç—É 12000
- **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:** http://localhost:12000

### 5. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **API Endpoints:** –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Bearer —Ç–æ–∫–µ–Ω—ã (test-token-123, admin-token-456)
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π:** 4 —Å–æ–±—ã—Ç–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- **–ú–µ—Ç—Ä–∏–∫–∏:** Prometheus-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã

---

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|-------|----------|--------|
| `/ready` | GET | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ | ‚úÖ |
| `/health` | GET | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è | ‚úÖ |
| `/metrics` | GET | –ú–µ—Ç—Ä–∏–∫–∏ Prometheus | ‚úÖ |
| `/events` | GET | –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π | ‚úÖ |
| `/post/:dest` | POST | –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è | ‚úÖ |

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
üöö –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mock Bulker API
===============================
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞... ‚úÖ 200 OK
2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è... ‚úÖ –£—Å–ø–µ—à–Ω–æ
3. –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π... ‚úÖ –£—Å–ø–µ—à–Ω–æ  
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫... ‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã
5. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π... ‚úÖ 4 —Å–æ–±—ã—Ç–∏—è
6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è... ‚úÖ –ó–¥–æ—Ä–æ–≤
```

### –ú–µ—Ç—Ä–∏–∫–∏
- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Å–æ–±—ã—Ç–∏–π:** 4
- **–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** 33+ —Å–µ–∫—É–Ω–¥
- **HTTP –∑–∞–ø—Ä–æ—Å–æ–≤:** 4
- **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:** ~100ms –Ω–∞ —Å–æ–±—ã—Ç–∏–µ

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
bulker/
‚îú‚îÄ‚îÄ bulkerapp/          # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ ingest/             # –ú–æ–¥—É–ª—å –ø—Ä–∏–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ sync-controller/    # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ kafkabase/          # Kafka –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ all.Dockerfile      # Multi-stage Dockerfile
‚îú‚îÄ‚îÄ docker-compose.test.yml  # –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ mock-bulker-server.py    # Mock —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îî‚îÄ‚îÄ test-api.sh         # –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Mock Server
- **–ü–æ—Ä—Ç:** 12000 (–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite (/tmp/bulker_mock.db)
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Bearer —Ç–æ–∫–µ–Ω—ã
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** JSON —Ñ–æ—Ä–º–∞—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
curl http://localhost:12000/ready

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è
curl -H "Authorization: Bearer test-token-123" \
     -H "Content-Type: application/json" \
     -d '{"user_id": 123, "action": "test"}' \
     http://localhost:12000/post/postgres_test?tableName=events

# –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫
curl http://localhost:12000/metrics

# –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π
curl http://localhost:12000/events
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
./test-api.sh
```

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞
```bash
ps aux | grep mock-bulker-server
curl -s http://localhost:12000/health | jq
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
tail -f server.log
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Kafka –∫–ª–∞—Å—Ç–µ—Ä** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL** - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis** - –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker Compose** - —Å –ø–æ–ª–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus + Grafana
6. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏

### –§–∞–π–ª—ã –¥–ª—è production:
- `docker-compose.test.yml` - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Kafka/PostgreSQL
- `init-db.sql` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `DEPLOYMENT.md` - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

1. **Mock Server** - –Ω–µ –ø–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å Bulker
2. **–ë–µ–∑ Kafka** - –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
3. **SQLite** - –≤–º–µ—Å—Ç–æ PostgreSQL
4. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** - –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DEPLOYMENT.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test-api.sh` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `server.log`

**–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ! üéâ**