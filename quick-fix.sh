#!/bin/bash

echo "üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞"
echo "========================================="

echo "1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Bulker..."
docker-compose -f docker-compose.local.yml -p bulker-local down 2>/dev/null || true

echo ""
echo "2. –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö Docker —Å–µ—Ç–µ–π..."
docker network prune -f

echo ""
echo "3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥—Å–µ—Ç–µ–π..."
echo "–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–¥—Å–µ—Ç–∏:"
docker network ls -q | xargs docker network inspect 2>/dev/null | grep -E '"Subnet"' | sort | uniq

echo ""
echo "4. –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:"
echo ""
echo "   –í–ê–†–ò–ê–ù–¢ A: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)"
echo "   ./start-local.sh docker-compose.local-simple.yml"
echo ""
echo "   –í–ê–†–ò–ê–ù–¢ B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å –Ω–æ–≤–æ–π –ø–æ–¥—Å–µ—Ç—å—é"
echo "   ./start-local.sh"
echo ""
echo "   –í–ê–†–ò–ê–ù–¢ C: –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö —Å–µ—Ç–µ–π"
echo "   docker network ls | grep 172.20 | awk '{print \$1}' | xargs docker network rm"

echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã—à–µ."